





## translation metadata
# Revision: $Revision: 22314 $
# Translation-Priority: 3-low
#include "head.wmi" TITLE="Tor: Hidden Service Configuration Instructions" CHARSET="UTF-8"
<div class="center">

<div class="main-column">

<h1>Configurar Servicios Ocultos para <a href="<page index>">Tor</a></h1>
<hr />

<p>Tor permite a los clientes ya los repetidores que ofrezcan servicios
ocultos. Es decir, usted puede ofrecer un servidor web, servidor SSH, etc,
sin revelar su dirección IP para sus usuarios. De hecho, debido a que no se
usa ninguna dirección pública, puede ejecutar un servicio oculto desde
detrás de su firewall.
</p>

<p>Si tiene Tor instalado, puede ver los servicios ocultos en acción visitando
<a href="http://duskgytldkxiuqc6.onion/">nuestro ejemplo de servicio
oculto</a>.
</p>

<p>Esta guía describe los pasos para la creación de su propio sitio web de
servicio oculto. Para los detalles técnicos de cómo funciona el protocolo de
servicio oculto, consulte nuestra <a href="<page hidden-services>">protocolo
de servicio oculto</a> page.
</p>

<hr /> <a id="zero"></a>
<h2><a class="anchor" href="#zero">Paso Cero: Hacer que Tor trabajo</a></h2>
<br />

<p>Antes de empezar, es necesario asegurarse de que:</p>
<ol>
<li>Tor está activo y en funcionamiento,</li>
<li>Lo has configurado correctamente.</li>
</ol>


<p>Los usuarios de Windows deberían seguir el <a href="<page
docs/tor-doc-windows>">Windows howto</a>, los usuarios de OS X deberían
seguir el <a href="<page docs/tor-doc-osx>">OS X howto</a>, y Linux/BSD/Unix
deberían seguir el <a href="<page docs/tor-doc-unix>">Unix howto</a>.
</p>

<p>Una vez que tenga Tor instalado y configurado, usted puede ver los servicios
ocultos en acción siguiendo este enlace <a
href="http://duskgytldkxiuqc6.onion/">nuestro ejemplo de servicio oculto</a>
o <a href="http://gaddbiwdftapglkq.onion/">Wikileaks ocultos servicio</a>.
Es típicamente 10-60 segundos en cargarse (o decidir que es acceder por el
momento). Si falla inmediatamente y tu navegador muestra una alerta diciendo
que "www.duskgytldkxiuqc6.onion no se encuentran, por favor, compruebe el
nombre y vuelva a intentarlo", entonces usted no ha configurado Tor
correctamente; ver <a
href="https://wiki.torproject.org/noreply/TheOnionRouter/TorFAQ#ItDoesntWork">la
que-no-funcionan de la FAQ de entrada</a> para ayuda.ListenRead phonetically
</p>

<hr /> <a id="one"></a>
<h2><a class="anchor" href="#one">Paso Uno: Instalar un servidor web
localmente</a></h2>
<br />

<p>En primer lugar, es necesario configurar un servidor web
localmente. Configuración de un servidor web puede ser complicado, así que
sólo va a ir más de algunos conceptos básicos aquí. Si te quedas atascado o
quieres hacer más, encontrar un amigo que le pueda ayudar. Le recomendamos
que instale un nuevo servidor web separado para su servicio oculto, ya que
incluso si ya tiene uno instalado, es posible que la use (o quiere usarlo
más tarde) para un sitio web real.
</p>

<p>Si está en Unix u OS X y está cómodo con la línea de comandos, con mucho, el
mejor camino a seguir es la instalación de <a
href="http://www.acme.com/software/thttpd/">thttpd</a>. Coja el último
fichero tar, descomprímalo (creará su propio directorio), y ejecutar
<kbd>./configure &amp;&amp; make</kbd>. Luego <kbd>mkdir hidserv; cd
hidserv</kbd>, y ejecutar <kbd>../thttpd -p 5222 -h localhost</kbd>. Se le
devolverá a su sistema, y ahora se está ejecutando un servidor web en el
puerto 5222. Puede poner ficheros para servir en el directorio hidserv.
</p>

<p>Si estás en Windows, podría elegir <a
href="http://savant.sourceforge.net/">Savant</a> o <a
href="http://httpd.apache.org/">Apache</a>, y asegúrese de configurarlo para
que escuche sólo a localhost. También debería averiguar en que puerto está
escuchando, porque lo utilizará más adelante.
</p>

<p>(La razón de que el servidor web sólo escuche a localhost es para asegurarse
de que no es accesible públicamente. Si la gente pudiera conectarse a él
directamente, podrían confirmar que su equipo es el que ofrece el servicio
oculto.)
</p>

<p>Una vez que tenga su servidor web configurado, asegúrese de que funciona:
abra su navegador y vaya a <a
href="http://localhost:5222/">http://localhost:5222/</a>, donde 5222 es el
puerto que eligió antes. Intente poner un archivo en el directorio html
principal, y asegúrese de que aparece cuando accede al sitio.
</p>

<hr /> <a id="two"></a>
<h2><a class="anchor" href="#two">Paso Dos: Configure su servicio oculto</a></h2>
<br />

<p>Después, usted necesita configurar su servicio oculto para que apunte a su
servidor web local.
</p>

<p>Primero, abra su fichero torrc en su editor de texto favorito. (Véase el <a
href="https://wiki.torproject.org/noreply/TheOnionRouter/TorFAQ#torrc">el
torrc FAQ entrada</a> para aprender lo que esto significa.) Vaya a la
sección del medio y busque la línea</p>

<pre>
\############### Esta sección es sólo para los servicios ocultos en la localización ###
</pre>

<p>
Esta sección del fichero consiste en grupos de líneas, cada una
representando un servicio oculto. Ahora mismo están todas comentadas (las
líneas comienzan con #), servicios para discapacitados están ocultos. Cada
grupo de líneas consiste en una <var>HiddenServiceDir</var> línea, y uno o
más <var>HiddenServicePort</var> líneas:</p>
<ul>
<li><var>HiddenServiceDir</var> es un directorio donde Tor almacenará
información acerca de ese servicio oculto. En particular, Tor creará un
fichero aquí de nombre <var>hostname</var> que le dirá la URL onion. No es
necesario añadir los archivos a este directorio. Asegúrese de que este no es
el mismo directorio que el directorio hidserv que ha creado al instalar
thttpd, como su HiddenServiceDir contiene información secreta!</li>
<li><var>HiddenServicePort</var> le permite especificar un puerto virtual (es
decir, lo que la gente puerto de acceso al servicio oculto creerán que están
usando) y una dirección IP y puerto para redireccionar conexiones a este
puerto virtual.</li>
</ul>

<p>Añadir las siguientes líneas a su torrc:
</p>

<pre>
HiddenServiceDir /Library/Tor/var/lib/tor/hidden_service/
HiddenServicePort 80 127.0.0.1:5222
</pre>

<p>Vas a querer cambiar el <var>HiddenServiceDir</var> línea, para que apunte a
un directorio real que sea legible / escribible por el usuario que ejecutará
Tor. La línea anterior debería funcionar si está usando el paquete Tor para
OS X. En Unix, pruebe "/home/username/hidden_service/" y complete su nombre
de usuario en lugar de "username". En Windows puede escoger:</p>
<pre>
HiddenServiceDir C:\Documents and Settings\username\Application Data\hidden_service\\
HiddenServicePort 80 127.0.0.1:5222
</pre>

<p>Ahora grabe el torrc, apague su Tor, e inícielo de nuevo.
</p>

<p>Si Tor se inicia de nuevo, genial. De lo contrario, algo está mal. Primer
vistazo a su archivos de registro en busca de pistas. Se imprimirá algunas
advertencias o mensajes de error. Eso te dará una idea de lo que salió
mal. Por lo general hay erratas en los permisos de directorio torrc o no
(ver <a
href="https://wiki.torproject.org/noreply/TheOnionRouter/TorFAQ#Logs">el
registro de entrada FAQ</a>si no seguro de cómo activar o encontrar su
archivo de registro.)
</p>

<p>Cuando Tor arranque, automáticamente creará el <var>HiddenServiceDir</var>
que especificó (si es necesario), y creará dos ficheros allí.</p>

<dl>
<dt><var>private_key</var></dt>
<dd>Primero, Tor generará un nuevo par de claves pública privada para su
servicio oculto. Está escrito en un archivo llamado "private_key". No
comparta esta clave con otros - si lo hace será capaz de hacerse pasar por
su servicio oculto.</dd>
<dt><var>hostname</var></dt>
<dd>El otro fichero que Tor creará se llama "hostname". Este contiene un breve
resumen de su llave pública - parecerá algo como
<tt>duskgytldkxiuqc6.onion</tt>. Este es el nombre público de su servicio, y
puede decírselo a la gente, publicarlo en sitios web, ponerlo en tarjetas de
visita, etc</dd>
</dl>

<p>Si Tor se ejecuta como un usuario diferente de usted, por ejemplo en OS X,
Debian, o Red Hat, puede que necesite hacerse root para poder ver estos
archivos.</p>

<p>Ahora que ha reiniciado Tor, está ocupado eligiendo puntos de introducción
en la red Tor, y generando <em>hidden service descriptor</em>. Esta es una
lista firmada de puntos de introducción junto con la llave pública completa
del servicio. Publica anónimamente este descriptor a los servidores de
directorio, y otra gente lo obtiene anónimamente de los servidores de
directorio cuando intentan acceder a su servicio.
</p>

<p>Pruébalo: pegar el contenido del fichero hostname en tu navegador web. Si
funciona, obtendrá la página html que configuró en el paso uno. Si no
funciona, mire en sus logs buscando sugerencias, y siga jugando con él hasta
que funcione.
</p>

<hr /> <a id="three"></a>
<h2><a class="anchor" href="#three">Paso Tres: Consejos más avanzados</a></h2>
<br />

<p>Si usted planea mantener su servicio disponible durante largo tiempo, es
posible que desee hacer una copia de seguridad del <var>private_key</var>
archivo en alguna parte.
</p>

<p>Hemos evitado recomendar Apache antes, a) porque mucha gente podría estar ya
ejecutándolo para su servidor web público en su ordenador, yb) porque es
grande y tiene muchos sitios donde podría revelar su dirección IP u otra
información de identificación, por ejemplo en 404 páginas. Para la gente que
necesita más funcionalidad, sin embargo, Apache puede ser la respuesta
correcta. ¿Puede alguien nos hace una lista de formas de bloquear el Apache
cuando se está usando como un servicio oculto? Savant probablemente también
tenga esos problemas también.
</p>

<p>Si quiere redireccionar múltiples puertos virtuales para un mismo servicio
oculto, simplemente añada más <var>HiddenServicePort</var> líneas. Si quiere
ejecutar múltiples servicios ocultos desde el mismo cliente Tor, simplemente
añada otra <var>HiddenServiceDir</var> línea. Todos los siguientes
<var>HiddenServicePort</var> líneas se refieren a este
<var>HiddenServiceDir</var> línea, hasta que añada otra
<var>HiddenServiceDir </var> línea:
</p>

<pre>
HiddenServiceDir /usr/local/etc/tor/hidden_service/
HiddenServicePort 80 127.0.0.1:8080

HiddenServiceDir /usr/local/etc/tor/other_hidden_service/
HiddenServicePort 6667 127.0.0.1:6667
HiddenServicePort 22 127.0.0.1:22
</pre>

<p>Hay algunos problemas de anonimato que debería tener en cuenta también:
</p>
<ul>
<li>Como se mencionó antes, tenga cuidado de dejar que su servidor web revele
información de identificación sobre usted, su equipo o su ubicación. Por
ejemplo, los lectores pueden probablemente determinar si es thttpd o Apache,
y aprender algo acerca de su sistema operativo.</li>
<li>Si el equipo no está conectado todo el tiempo, su servicio oculto tampoco lo
estará. Esta fuga de información a un adversario observador.</li>

<!-- increased risks over time -->
</ul>

<hr />

<p>Si tiene sugerencias para mejorar este documento, por favor <a href="<page
contact>">envíanoslas</a>. Gracias!</p>

  </div>
<!-- #main -->
</div>


#include <foot.wmi>
