Here are the instructions I sent David Fifield when he asked about
editing the website. I hope they are useful for you too! --Roger

See the Makefile.local file in your website/trunk/ directory. Uncomment
TORGIT and point it to a tor git.

Then apt-get install wml and (alas) probably a shocking number of other
debs. Then you can type 'make' and it will build the website for you
locally. It's probably a smart move to see whether 'make' works before
you svn commit any changes to the wml file.

You can edit docs/en/pluggable-transports.wml (and that is
the right source file to edit, not the html). But go take a
look at that file. You'll notice it has a bunch of tags like
<version-torobfsbundlelinux64alpha>. If you're just bumping version
numbers, you probably just want to change the definition of those tags.
They're in include/versions.wmi

(Every once in a while you may need to edit pluggable-transports.wml
too -- generally when you change the file name so drastically that just
changing the versions.wmi tags isn't enough.)

If you want to push your locally built website to the remote webserver,
run the ./publish script in website/trunk/. It will rsync everything
over, and then it will ask www-master.tp.o to run its trigger-mirrors
script which causes www-master to rsync to all the servers in the www.tp.o
rotation. To push the website, you'll need to be in the torwww ldap group
(which is separate from whether you can commit to svn).

Alas, https://www.torproject.org/dist/ isn't in version control. You
write to it by ssh'ing to www-master.torproject.org and going to
/srv/www-master.torproject.org/htdocs/dist/ and then sticking your stuff
there. When you want it to go live, you run ./publish from your local
website checkout, which will trigger the trigger-mirrors run. (It's
possible that you can simply run /home/mirroradm/bin/trigger-mirrors on
www-master too, but I've never tried.)

Weasel has hopes that somebody will write some scripts to make maintaining
packages in dist/ less awful -- automatically check that they have
signatures and that the sigs match, that the items on the website are in
fact in dist, only allow certain people to put files in certain places,
etc. One day! :)

